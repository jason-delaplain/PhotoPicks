# üîÑ Upgrade Guide - October 2025

## Critical Updates Applied

This document outlines the recent critical updates made to PhotoPicks to ensure compatibility, stability, and best practices.

## ‚ö†Ô∏è Breaking Changes

### React Native Version Update
- **From**: `0.81.4` (invalid version)
- **To**: `0.76.5`
- **Reason**: Version 0.81.x doesn't exist. Updated to latest stable version compatible with Expo SDK 54.

### React Version Update
- **From**: `19.1.0`
- **To**: `18.3.1`
- **Reason**: React 19 is not yet stable for React Native. Reverted to recommended version for Expo SDK 54.

## üìã Migration Steps

### 1. Update Dependencies

After pulling the latest changes, you **MUST** reinstall dependencies:

```bash
# Remove existing node_modules and lock files
rm -rf node_modules
rm package-lock.json  # or yarn.lock if using yarn

# Install fresh dependencies
npm install
# or
yarn install
```

### 2. Rebuild Native Code

The React Native version change requires rebuilding native projects:

```bash
# Clean and rebuild native projects
npx expo prebuild --clean

# For iOS (Mac only)
cd ios
pod install
cd ..

# Test the build
npm run ios
npm run android
```

### 3. Clear Caches

Clear all Metro and build caches:

```bash
# Clear Metro cache
npx expo start --clear

# Clear watchman cache (if installed)
watchman watch-del-all

# Clear iOS build cache (Mac only)
cd ios
xcodebuild clean
cd ..

# Clear Android build cache
cd android
./gradlew clean
cd ..
```

## üÜï New Configuration Files

### Jest Configuration
- **File**: `jest.config.js`
- **Purpose**: Proper test setup with coverage collection
- **Action**: No action needed, file is configured

### Jest Setup
- **File**: `jest.setup.js`
- **Purpose**: Mock Expo modules for testing
- **Action**: No action needed, file is configured

### ESLint Configuration
- **File**: `.eslintrc.js`
- **Purpose**: Code quality and style enforcement
- **Action**: Run `npm run lint` to check code quality

### Prettier Configuration
- **File**: `.prettierrc`
- **Purpose**: Consistent code formatting
- **Action**: Install Prettier extension in your IDE for auto-formatting

### Babel Configuration
- **File**: `babel.config.js`
- **Purpose**: Support for path aliases and React Native
- **Action**: No action needed, file is configured

## üîß Updated Configurations

### TypeScript (tsconfig.json)
- **Enabled**: Stricter type checking with `noImplicitAny: true`
- **Added**: Path aliases support (`@/*` -> `src/*`)
- **Added**: Jest types
- **Action**: Fix any new TypeScript errors that appear

### Package.json
- **Added**: New scripts for prebuild
- **Added**: ESLint to devDependencies
- **Updated**: All React/React Native versions
- **Action**: Use new scripts as documented

### .gitignore
- **Updated**: More comprehensive exclusions
- **Added**: VS Code, coverage, and build artifacts
- **Action**: No action needed

## ‚öôÔ∏è New Features

### Path Aliases
You can now use `@/` to import from the `src` directory:

```typescript
// Before
import { Component } from '../../../components/Component';

// After
import { Component } from '@/components/Component';
```

### Better Testing
Run tests with the new configuration:

```bash
# Run all tests
npm test

# Run with coverage
npm test -- --coverage

# Watch mode
npm test -- --watch
```

### Code Quality Tools
Enforce code quality with linting and formatting:

```bash
# Check for linting errors
npm run lint

# Format code with Prettier (if installed)
npx prettier --write .
```

## üì± Platform-Specific Updates

### Android
- **Gradle**: Using version 8.13 (latest)
- **New Architecture**: Enabled
- **Hermes**: Enabled
- **Action**: Rebuild after pulling changes

### iOS
- **Podfile**: Auto-generated by Expo
- **Action**: Run `pod install` in ios directory after prebuild

## üö® Common Issues & Solutions

### Issue: Metro bundler fails to start
**Solution**:
```bash
npx expo start --clear
```

### Issue: Build fails with "Duplicate module" error
**Solution**:
```bash
rm -rf node_modules
npm install
npx expo prebuild --clean
```

### Issue: TypeScript errors after update
**Solution**:
The stricter TypeScript settings may reveal existing issues. Fix them by:
1. Adding proper type annotations
2. Handling potential undefined/null values
3. Using type guards where necessary

### Issue: Tests fail to run
**Solution**:
```bash
npm install --save-dev @types/jest jest
npm test
```

### Issue: iOS build fails
**Solution**:
```bash
cd ios
pod deintegrate
pod install
cd ..
npx expo run:ios
```

### Issue: Android build fails
**Solution**:
```bash
cd android
./gradlew clean
cd ..
npx expo run:android
```

## ‚úÖ Verification Checklist

After upgrading, verify everything works:

- [ ] Dependencies installed successfully (`npm install`)
- [ ] Metro bundler starts (`npm start`)
- [ ] TypeScript compilation passes (`npm run typecheck`)
- [ ] Linting passes (`npm run lint`)
- [ ] Tests run successfully (`npm test`)
- [ ] iOS build works (`npm run ios`)
- [ ] Android build works (`npm run android`)
- [ ] App launches without errors
- [ ] All features work as expected

## üìö Additional Resources

- [React Native 0.76 Release Notes](https://reactnative.dev/blog)
- [Expo SDK 54 Documentation](https://docs.expo.dev/)
- [React 18 Migration Guide](https://react.dev/blog/2022/03/08/react-18-upgrade-guide)

## üÜò Need Help?

If you encounter issues not covered in this guide:

1. Check the [GitHub Issues](https://github.com/jason-delaplain/PhotoPicks/issues)
2. Review [Expo troubleshooting docs](https://docs.expo.dev/troubleshooting/overview/)
3. Contact: deladroid@gmail.com

---

**Last Updated**: October 11, 2025
**Version**: 1.0.0
